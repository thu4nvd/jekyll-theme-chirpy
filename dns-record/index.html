<!DOCTYPE html><html lang="en-US" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="🌐 DNS - Một bản ghi (DNS record) trông như thế nào?" /><meta name="author" content="thu4nvd" /><meta property="og:locale" content="en_US" /><meta name="description" content="Domain Name System (DNS)&nbsp;thay đổi các URL dễ đọc thành&nbsp;địa chỉ IP. Nhưng làm thế nào để bạn đảm bảo rằng một&nbsp;URL&nbsp;đang trỏ đến đúng địa chỉ IP? Trước khi mọi người có thể tìm thấy trang web của bạn, bạn phải xác định các DNS record (bản ghi DNS) của trang web. DNS record cơ bản nhất liên kết domain với một địa chỉ IP. Có những loại bản ghi DNS khác đảm bảo email được gửi và cho phép bạn thiết lập domain phụ và các dịch vụ khác. Thông tin nào có trong mỗi bản ghi DNS? Mỗi bản ghi DNS chứa 4 trường chính:&nbsp;Type, Name, Data&nbsp;và&nbsp;TTL. –&nbsp;Type: Loại bản ghi DNS xác định phần domain mà mỗi bản ghi sẽ thay đổi. Các loại bản ghi quan trọng nhất để giúp bạn thiết lập và vận hành được đề cập bên dưới. –&nbsp;Name: Trường này cho phép bạn thêm tiền tố (hay chính xác hơn là hậu tố, vì tên miền về mặt kỹ thuật được đọc từ phải sang trái) vào tên miền chính. Nếu bạn đang thêm bản ghi cho một domain phụ, chẳng hạn như&nbsp;shop.example.com, bạn sẽ nhập&nbsp;“shop”&nbsp;vào trường này. –&nbsp;Data: Trường dữ liệu chứa thông tin khác nhau tùy thuộc vào loại bản ghi bạn đang tạo. –&nbsp;TTL: TTL là viết tắt của&nbsp;Time to Live. Đây là thời gian tính bằng giây để mọi thay đổi đối với bản ghi DNS có hiệu lực. Với TTL là 3600, tất cả các thay đổi đối với bản ghi ví dụ này sẽ được làm mới sau mỗi 3600 giây (1 giờ). 1. SOA (Start of Authority)# Trong mỗi tập tin cơ sở dữ liệu DNS phải có một và chỉ một record SOA (Start of Authority). Bao gồm các thông tin về domain trên DNS Server, thông tin về zone transfer. Cú pháp : $TTL 86400 @ IN SOA masterdns.example.com. admin.example.com. ( masterdns.example.com. giá trị DNS chính của tên miền hoặc máy chủ. admin.example.com. chuyển đổi từ dạng admin@example.com, thể hiện chủ thể sở hữu tên miền này. Serial : áp dụng cho mọi dữ liệu trong zone và có định dạng YYYYMMDDNN với YYYY là năm, MM là tháng, DD là ngày, NN là số lần sửa đổi dữ liệu zone trong ngày. Luôn luôn phải tăng số này lên mỗi lần sửa đổi dữ liệu zone. Khi máy chủ Secondary liên lạc với máy chủ Primary, trước tiên nó sẽ hỏi số serial. Nếu số serial của máy Secondary nhỏ hơn số serial của máy Primary tức là dữ liệu zone trên Secondary đã cũ và sao đó máy Secondary sẽ sao chép dữ liệu mới từ máy Primary thay cho dữ liệu đang có. Refresh : chỉ ra khoảng thời gian máy chủ Secondary kiểm tra sữ liệu zone trên máy Primary để cập nhật nếu cần. Giá trị này thay đổi tùy theo tuần suất thay đổi dữ liệu trong zone. Retry : nếu máy chủ Secondary không kết nối được với máy chủ Primary theo thời hạn mô tả trong refresh (ví dụ máy chủ Primary bị shutdown vào lúc đó thì máy chủ Secondary phải tìm cách kết nối lại với máy chủ Primary theo một chu kỳ thời gian mô tả trong retry. Thông thường, giá trị này nhỏ hơn giá trị refresh). Expire : nếu sau khoảng thời gian này mà máy chủ Secondary không kết nối được với máy chủ Primary thì dữ liệu zone trên máy Secondary sẽ bị quá hạn. Khi dữ liệu trên Secondary bị quá hạn thì máy chủ này sẽ không trả lời mỗi truy vấn về zone này nữa. Giá trị expire này phải lớn hơn giá trị refresh và giá trị retry. TTL (time to live) : giá trị này áp dụng cho mọi record trong zone và được đính kèm trong thông tin trả lời một truy vấn. Mục đích của nó là chỉ ra thời gian mà các máy chủ name server khác cache lại thông tin trả lời. 2. NS (Name Server)# Record tiếp theo cần có trong zone là NS (name server) record. Mỗi name server cho zone sẽ có một NS record. Chứa địa chỉ IP của DNS Server cùng với các thông tin về domain đó. Ví dụ : Record NS sau : cloud365.vn. IN NS ns1.zonedns.vn. cloud365.vn. IN NS ns2.zonedns.vn. Chỉ ra hai name servers cho miền Thực hiện bởi cloud365.vn. 3. Record A# Là một record căn bản và quan trọng, dùng để ánh xạ từ một domain thành địa chỉ IP cho phép có thể truy cập website. Đây là chức năng cốt lõi của hệ thống DNS. Record A có dạng như sau: cloud365.vn A 103.101.161.201 Tên miền con (subdomain): sub.cloud365.vn A 103.101.161.201 4. Record AAAA# Có nhiệm vụ tương tự như bản ghi A, nhưng thay vì địa chỉ IPv4 sẽ là địa chỉ IPv6. 5. Record PTR# Hệ thống tên miền thông thường cho phép chuyển đổi từ tên miền sang địa chỉ IP. Trong thực tế, một số dịch vụ Internet đòi hỏi hệ thống máy chủ DNS phải có chức năng chuyển đổi từ địa chỉ IP sang tên miền. Tên miền ngược thường được sử dụng trong một số trường hợp xác thực email gửi đi. Ví dụ về dạng thức một bản ghi PTR như sau: 90.163.101.103.in-addr.arpa IN PTR masterdns.tuanda.com. đối với IPv4, hoặc đối với IPv6: 0.0.0.0.0.0.0.0.0.0.0.0.d.c.b.a.4.3.2.1.3.2.1.0.8.c.d.0.1.0.0.2.ip6.arpa IN PTR masterdns.tuanda.com. 6. Record SRV# Bản ghi SRV được sử dụng để xác định vị trí các dịch vụ đặc biệt trong 1 domain, ví dụ tên máy chủ và số cổng của các máy chủ cho các dịch vụ được chỉ định. Ví dụ: _ldap._tcp.example.com. 3600 IN SRV 10 0 389 ldap01.example.com. Một Client trong trường hợp này có thể nhờ DNS nhận ra rằng, trong tên miền example.com có LDAP Server ldap01, mà có thể liên lạc qua cổng TCP Port 389 . Các trường trong record SRV : Tên dịch vụ service. Giao thức sử dụng. Tên miền (domain name). TTL: Thời gian RR được giữ trong cache Class: standard DNS class, luôn là IN Ưu tiên: ưu tiên của host, số càng nhỏ càng ưu tiên. Trọng lượng: khi cùng bực ưu tiên, thì trọng lượng 3 so với trọng lượng 2 sẽ được lựa chọn 60% (hỗ trợ load balancing). Port của dịch vụ (tcp hay udp). Target chỉ định FQDN cho host hỗ trợ dịch vụ. 7. Record CNAME (Canonical Name)# Cho phép tên miền có nhiều bí danh khác nhau, khi truy cập các bí danh sẽ cũng về một địa chỉ tên miền. Để sử dụng bản ghi CNAME cần khai báo bản ghi A trước. Ví dụ bản ghi CNAME phổ biến nhất: www CNAME example.com mail CNAME example.com example.com A 103.101.161.201 Khi một yêu cầu đến địa chỉ www.example.com thì DNS sẽ tìm đến example thông qua bản ghi CNAME, một truy vấn DNS mới sẽ tiếp tục tìm đến địa chỉ IP: 103.101.161.201 thông qua bản ghi A. 8. Record MX# Bản ghi MX có tác dụng xác định, chuyển thư đến domain hoặc subdomain đích. Bản ghi MX có dạng example.com MX 10 mail.example.com. mail.example.com A 103.101.161.201 Độ ưu tiền càng cao thì số càng thấp. example.com MX 10 mail_1.example.com example.com MX 20 mail_2.example.com example.com MX 30 mail_3.example.com Bản ghi MX không nhất thiết phải trỏ đến hosting – VPS- Server của người dùng. Nếu người dùng đang sử dụng dịch vụ mail của bên thứ ba như Gmail thì cần sử dụng bản nghi MX do họ cung cấp. 9. Record TXT# Bản ghi TXT(text) được sử dụng để cung cấp khả năng liên kết văn bản tùy ý với máy chủ. Chủ yếu dùng trong mục đích xác thực máy chủ với tên miền. 10. Record DKIM# Là bản ghi dùng để xác thực người gửi bằng cách mã hóa một phần email gửi bằng một chuỗi ký tự, xem như là chữ ký. Khi email được gửi đi máy chủ mail sẽ kiểm so sánh với thông tin bản ghi đã được cấu hình trong DNS để xác nhận. Bản ghi DKIM có dạng: mail._domainkey.cloud365.vn TXT k=rsa;p=MIIBIjANBgkqhkiG9w0BA 11. Record SPF# Record SPF được tạo ra nhầm đảm bảo các máy chủ mail sẽ chấp nhận mail từ tên miền của khách hàng chỉ được gửi đi từ server của khách hàng. Sẽ giúp chống spam và giả mạo email. Bản ghi SPF thể hiện dưới dạng: cloud365.vn SPF &quot;v=spf1 ip4:103.101.162.0/24 -all&quot; 3600 Tùy vào hệ thống DNS mà có thể hiển thị bản ghi SPF hoặc TXT Với bản ghi SPF, máy chủ tiếp nhận mail sẽ kiểm tra IP của máy chủ gửi và IP của máy chủ đã đăng kí bản ghi SPF example.com. Nếu Khách hàng có nhiều máy chủ mail nên liệt kê tất cả trong bản ghi SPF giúp đảm bảo thư đến được chính xác và đầy đủ. ** Tài liệu tham khảo: https://vnnic.vn/diachiip/hotro/c%C3%A1c-c%C3%A2u-h%E1%BB%8Fi-%C4%91%C3%A1p-v%E1%BB%81-t%C3%AAn-mi%E1%BB%81n-ng%C6%B0%E1%BB%A3c https://vnnic.vn/sites/default/files/tailieu/huong_dan_khai_bao_ten_mien_nguoc.pdf https://vi.wikipedia.org/wiki/SRV_Record#C%E1%BA%A5u_tr%C3%BAc https://www.dns-school.org/Documentation/bind-arm/Bv9ARM.ch01.html https://securitydaily.net/tim-hieu-he-thong-ten-mien-dns-domain-name-system/ Credit: Cloud365_vn" /><meta property="og:description" content="Domain Name System (DNS)&nbsp;thay đổi các URL dễ đọc thành&nbsp;địa chỉ IP. Nhưng làm thế nào để bạn đảm bảo rằng một&nbsp;URL&nbsp;đang trỏ đến đúng địa chỉ IP? Trước khi mọi người có thể tìm thấy trang web của bạn, bạn phải xác định các DNS record (bản ghi DNS) của trang web. DNS record cơ bản nhất liên kết domain với một địa chỉ IP. Có những loại bản ghi DNS khác đảm bảo email được gửi và cho phép bạn thiết lập domain phụ và các dịch vụ khác. Thông tin nào có trong mỗi bản ghi DNS? Mỗi bản ghi DNS chứa 4 trường chính:&nbsp;Type, Name, Data&nbsp;và&nbsp;TTL. –&nbsp;Type: Loại bản ghi DNS xác định phần domain mà mỗi bản ghi sẽ thay đổi. Các loại bản ghi quan trọng nhất để giúp bạn thiết lập và vận hành được đề cập bên dưới. –&nbsp;Name: Trường này cho phép bạn thêm tiền tố (hay chính xác hơn là hậu tố, vì tên miền về mặt kỹ thuật được đọc từ phải sang trái) vào tên miền chính. Nếu bạn đang thêm bản ghi cho một domain phụ, chẳng hạn như&nbsp;shop.example.com, bạn sẽ nhập&nbsp;“shop”&nbsp;vào trường này. –&nbsp;Data: Trường dữ liệu chứa thông tin khác nhau tùy thuộc vào loại bản ghi bạn đang tạo. –&nbsp;TTL: TTL là viết tắt của&nbsp;Time to Live. Đây là thời gian tính bằng giây để mọi thay đổi đối với bản ghi DNS có hiệu lực. Với TTL là 3600, tất cả các thay đổi đối với bản ghi ví dụ này sẽ được làm mới sau mỗi 3600 giây (1 giờ). 1. SOA (Start of Authority)# Trong mỗi tập tin cơ sở dữ liệu DNS phải có một và chỉ một record SOA (Start of Authority). Bao gồm các thông tin về domain trên DNS Server, thông tin về zone transfer. Cú pháp : $TTL 86400 @ IN SOA masterdns.example.com. admin.example.com. ( masterdns.example.com. giá trị DNS chính của tên miền hoặc máy chủ. admin.example.com. chuyển đổi từ dạng admin@example.com, thể hiện chủ thể sở hữu tên miền này. Serial : áp dụng cho mọi dữ liệu trong zone và có định dạng YYYYMMDDNN với YYYY là năm, MM là tháng, DD là ngày, NN là số lần sửa đổi dữ liệu zone trong ngày. Luôn luôn phải tăng số này lên mỗi lần sửa đổi dữ liệu zone. Khi máy chủ Secondary liên lạc với máy chủ Primary, trước tiên nó sẽ hỏi số serial. Nếu số serial của máy Secondary nhỏ hơn số serial của máy Primary tức là dữ liệu zone trên Secondary đã cũ và sao đó máy Secondary sẽ sao chép dữ liệu mới từ máy Primary thay cho dữ liệu đang có. Refresh : chỉ ra khoảng thời gian máy chủ Secondary kiểm tra sữ liệu zone trên máy Primary để cập nhật nếu cần. Giá trị này thay đổi tùy theo tuần suất thay đổi dữ liệu trong zone. Retry : nếu máy chủ Secondary không kết nối được với máy chủ Primary theo thời hạn mô tả trong refresh (ví dụ máy chủ Primary bị shutdown vào lúc đó thì máy chủ Secondary phải tìm cách kết nối lại với máy chủ Primary theo một chu kỳ thời gian mô tả trong retry. Thông thường, giá trị này nhỏ hơn giá trị refresh). Expire : nếu sau khoảng thời gian này mà máy chủ Secondary không kết nối được với máy chủ Primary thì dữ liệu zone trên máy Secondary sẽ bị quá hạn. Khi dữ liệu trên Secondary bị quá hạn thì máy chủ này sẽ không trả lời mỗi truy vấn về zone này nữa. Giá trị expire này phải lớn hơn giá trị refresh và giá trị retry. TTL (time to live) : giá trị này áp dụng cho mọi record trong zone và được đính kèm trong thông tin trả lời một truy vấn. Mục đích của nó là chỉ ra thời gian mà các máy chủ name server khác cache lại thông tin trả lời. 2. NS (Name Server)# Record tiếp theo cần có trong zone là NS (name server) record. Mỗi name server cho zone sẽ có một NS record. Chứa địa chỉ IP của DNS Server cùng với các thông tin về domain đó. Ví dụ : Record NS sau : cloud365.vn. IN NS ns1.zonedns.vn. cloud365.vn. IN NS ns2.zonedns.vn. Chỉ ra hai name servers cho miền Thực hiện bởi cloud365.vn. 3. Record A# Là một record căn bản và quan trọng, dùng để ánh xạ từ một domain thành địa chỉ IP cho phép có thể truy cập website. Đây là chức năng cốt lõi của hệ thống DNS. Record A có dạng như sau: cloud365.vn A 103.101.161.201 Tên miền con (subdomain): sub.cloud365.vn A 103.101.161.201 4. Record AAAA# Có nhiệm vụ tương tự như bản ghi A, nhưng thay vì địa chỉ IPv4 sẽ là địa chỉ IPv6. 5. Record PTR# Hệ thống tên miền thông thường cho phép chuyển đổi từ tên miền sang địa chỉ IP. Trong thực tế, một số dịch vụ Internet đòi hỏi hệ thống máy chủ DNS phải có chức năng chuyển đổi từ địa chỉ IP sang tên miền. Tên miền ngược thường được sử dụng trong một số trường hợp xác thực email gửi đi. Ví dụ về dạng thức một bản ghi PTR như sau: 90.163.101.103.in-addr.arpa IN PTR masterdns.tuanda.com. đối với IPv4, hoặc đối với IPv6: 0.0.0.0.0.0.0.0.0.0.0.0.d.c.b.a.4.3.2.1.3.2.1.0.8.c.d.0.1.0.0.2.ip6.arpa IN PTR masterdns.tuanda.com. 6. Record SRV# Bản ghi SRV được sử dụng để xác định vị trí các dịch vụ đặc biệt trong 1 domain, ví dụ tên máy chủ và số cổng của các máy chủ cho các dịch vụ được chỉ định. Ví dụ: _ldap._tcp.example.com. 3600 IN SRV 10 0 389 ldap01.example.com. Một Client trong trường hợp này có thể nhờ DNS nhận ra rằng, trong tên miền example.com có LDAP Server ldap01, mà có thể liên lạc qua cổng TCP Port 389 . Các trường trong record SRV : Tên dịch vụ service. Giao thức sử dụng. Tên miền (domain name). TTL: Thời gian RR được giữ trong cache Class: standard DNS class, luôn là IN Ưu tiên: ưu tiên của host, số càng nhỏ càng ưu tiên. Trọng lượng: khi cùng bực ưu tiên, thì trọng lượng 3 so với trọng lượng 2 sẽ được lựa chọn 60% (hỗ trợ load balancing). Port của dịch vụ (tcp hay udp). Target chỉ định FQDN cho host hỗ trợ dịch vụ. 7. Record CNAME (Canonical Name)# Cho phép tên miền có nhiều bí danh khác nhau, khi truy cập các bí danh sẽ cũng về một địa chỉ tên miền. Để sử dụng bản ghi CNAME cần khai báo bản ghi A trước. Ví dụ bản ghi CNAME phổ biến nhất: www CNAME example.com mail CNAME example.com example.com A 103.101.161.201 Khi một yêu cầu đến địa chỉ www.example.com thì DNS sẽ tìm đến example thông qua bản ghi CNAME, một truy vấn DNS mới sẽ tiếp tục tìm đến địa chỉ IP: 103.101.161.201 thông qua bản ghi A. 8. Record MX# Bản ghi MX có tác dụng xác định, chuyển thư đến domain hoặc subdomain đích. Bản ghi MX có dạng example.com MX 10 mail.example.com. mail.example.com A 103.101.161.201 Độ ưu tiền càng cao thì số càng thấp. example.com MX 10 mail_1.example.com example.com MX 20 mail_2.example.com example.com MX 30 mail_3.example.com Bản ghi MX không nhất thiết phải trỏ đến hosting – VPS- Server của người dùng. Nếu người dùng đang sử dụng dịch vụ mail của bên thứ ba như Gmail thì cần sử dụng bản nghi MX do họ cung cấp. 9. Record TXT# Bản ghi TXT(text) được sử dụng để cung cấp khả năng liên kết văn bản tùy ý với máy chủ. Chủ yếu dùng trong mục đích xác thực máy chủ với tên miền. 10. Record DKIM# Là bản ghi dùng để xác thực người gửi bằng cách mã hóa một phần email gửi bằng một chuỗi ký tự, xem như là chữ ký. Khi email được gửi đi máy chủ mail sẽ kiểm so sánh với thông tin bản ghi đã được cấu hình trong DNS để xác nhận. Bản ghi DKIM có dạng: mail._domainkey.cloud365.vn TXT k=rsa;p=MIIBIjANBgkqhkiG9w0BA 11. Record SPF# Record SPF được tạo ra nhầm đảm bảo các máy chủ mail sẽ chấp nhận mail từ tên miền của khách hàng chỉ được gửi đi từ server của khách hàng. Sẽ giúp chống spam và giả mạo email. Bản ghi SPF thể hiện dưới dạng: cloud365.vn SPF &quot;v=spf1 ip4:103.101.162.0/24 -all&quot; 3600 Tùy vào hệ thống DNS mà có thể hiển thị bản ghi SPF hoặc TXT Với bản ghi SPF, máy chủ tiếp nhận mail sẽ kiểm tra IP của máy chủ gửi và IP của máy chủ đã đăng kí bản ghi SPF example.com. Nếu Khách hàng có nhiều máy chủ mail nên liệt kê tất cả trong bản ghi SPF giúp đảm bảo thư đến được chính xác và đầy đủ. ** Tài liệu tham khảo: https://vnnic.vn/diachiip/hotro/c%C3%A1c-c%C3%A2u-h%E1%BB%8Fi-%C4%91%C3%A1p-v%E1%BB%81-t%C3%AAn-mi%E1%BB%81n-ng%C6%B0%E1%BB%A3c https://vnnic.vn/sites/default/files/tailieu/huong_dan_khai_bao_ten_mien_nguoc.pdf https://vi.wikipedia.org/wiki/SRV_Record#C%E1%BA%A5u_tr%C3%BAc https://www.dns-school.org/Documentation/bind-arm/Bv9ARM.ch01.html https://securitydaily.net/tim-hieu-he-thong-ten-mien-dns-domain-name-system/ Credit: Cloud365_vn" /><link rel="canonical" href="https://thu4nvd.github.io//dns-record/" /><meta property="og:url" content="https://thu4nvd.github.io//dns-record/" /><meta property="og:site_name" content="Thu4nvd Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-04T01:17:52+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="🌐 DNS - Một bản ghi (DNS record) trông như thế nào?" /><meta name="twitter:site" content="@thu4nvd" /><meta name="twitter:creator" content="@thu4nvd" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"thu4nvd"},"description":"Domain Name System (DNS)&nbsp;thay đổi các URL dễ đọc thành&nbsp;địa chỉ IP. Nhưng làm thế nào để bạn đảm bảo rằng một&nbsp;URL&nbsp;đang trỏ đến đúng địa chỉ IP? Trước khi mọi người có thể tìm thấy trang web của bạn, bạn phải xác định các DNS record (bản ghi DNS) của trang web. DNS record cơ bản nhất liên kết domain với một địa chỉ IP. Có những loại bản ghi DNS khác đảm bảo email được gửi và cho phép bạn thiết lập domain phụ và các dịch vụ khác. Thông tin nào có trong mỗi bản ghi DNS? Mỗi bản ghi DNS chứa 4 trường chính:&nbsp;Type, Name, Data&nbsp;và&nbsp;TTL. –&nbsp;Type: Loại bản ghi DNS xác định phần domain mà mỗi bản ghi sẽ thay đổi. Các loại bản ghi quan trọng nhất để giúp bạn thiết lập và vận hành được đề cập bên dưới. –&nbsp;Name: Trường này cho phép bạn thêm tiền tố (hay chính xác hơn là hậu tố, vì tên miền về mặt kỹ thuật được đọc từ phải sang trái) vào tên miền chính. Nếu bạn đang thêm bản ghi cho một domain phụ, chẳng hạn như&nbsp;shop.example.com, bạn sẽ nhập&nbsp;“shop”&nbsp;vào trường này. –&nbsp;Data: Trường dữ liệu chứa thông tin khác nhau tùy thuộc vào loại bản ghi bạn đang tạo. –&nbsp;TTL: TTL là viết tắt của&nbsp;Time to Live. Đây là thời gian tính bằng giây để mọi thay đổi đối với bản ghi DNS có hiệu lực. Với TTL là 3600, tất cả các thay đổi đối với bản ghi ví dụ này sẽ được làm mới sau mỗi 3600 giây (1 giờ). 1. SOA (Start of Authority)# Trong mỗi tập tin cơ sở dữ liệu DNS phải có một và chỉ một record SOA (Start of Authority). Bao gồm các thông tin về domain trên DNS Server, thông tin về zone transfer. Cú pháp : $TTL 86400 @ IN SOA masterdns.example.com. admin.example.com. ( masterdns.example.com. giá trị DNS chính của tên miền hoặc máy chủ. admin.example.com. chuyển đổi từ dạng admin@example.com, thể hiện chủ thể sở hữu tên miền này. Serial : áp dụng cho mọi dữ liệu trong zone và có định dạng YYYYMMDDNN với YYYY là năm, MM là tháng, DD là ngày, NN là số lần sửa đổi dữ liệu zone trong ngày. Luôn luôn phải tăng số này lên mỗi lần sửa đổi dữ liệu zone. Khi máy chủ Secondary liên lạc với máy chủ Primary, trước tiên nó sẽ hỏi số serial. Nếu số serial của máy Secondary nhỏ hơn số serial của máy Primary tức là dữ liệu zone trên Secondary đã cũ và sao đó máy Secondary sẽ sao chép dữ liệu mới từ máy Primary thay cho dữ liệu đang có. Refresh : chỉ ra khoảng thời gian máy chủ Secondary kiểm tra sữ liệu zone trên máy Primary để cập nhật nếu cần. Giá trị này thay đổi tùy theo tuần suất thay đổi dữ liệu trong zone. Retry : nếu máy chủ Secondary không kết nối được với máy chủ Primary theo thời hạn mô tả trong refresh (ví dụ máy chủ Primary bị shutdown vào lúc đó thì máy chủ Secondary phải tìm cách kết nối lại với máy chủ Primary theo một chu kỳ thời gian mô tả trong retry. Thông thường, giá trị này nhỏ hơn giá trị refresh). Expire : nếu sau khoảng thời gian này mà máy chủ Secondary không kết nối được với máy chủ Primary thì dữ liệu zone trên máy Secondary sẽ bị quá hạn. Khi dữ liệu trên Secondary bị quá hạn thì máy chủ này sẽ không trả lời mỗi truy vấn về zone này nữa. Giá trị expire này phải lớn hơn giá trị refresh và giá trị retry. TTL (time to live) : giá trị này áp dụng cho mọi record trong zone và được đính kèm trong thông tin trả lời một truy vấn. Mục đích của nó là chỉ ra thời gian mà các máy chủ name server khác cache lại thông tin trả lời. 2. NS (Name Server)# Record tiếp theo cần có trong zone là NS (name server) record. Mỗi name server cho zone sẽ có một NS record. Chứa địa chỉ IP của DNS Server cùng với các thông tin về domain đó. Ví dụ : Record NS sau : cloud365.vn. IN NS ns1.zonedns.vn. cloud365.vn. IN NS ns2.zonedns.vn. Chỉ ra hai name servers cho miền Thực hiện bởi cloud365.vn. 3. Record A# Là một record căn bản và quan trọng, dùng để ánh xạ từ một domain thành địa chỉ IP cho phép có thể truy cập website. Đây là chức năng cốt lõi của hệ thống DNS. Record A có dạng như sau: cloud365.vn A 103.101.161.201 Tên miền con (subdomain): sub.cloud365.vn A 103.101.161.201 4. Record AAAA# Có nhiệm vụ tương tự như bản ghi A, nhưng thay vì địa chỉ IPv4 sẽ là địa chỉ IPv6. 5. Record PTR# Hệ thống tên miền thông thường cho phép chuyển đổi từ tên miền sang địa chỉ IP. Trong thực tế, một số dịch vụ Internet đòi hỏi hệ thống máy chủ DNS phải có chức năng chuyển đổi từ địa chỉ IP sang tên miền. Tên miền ngược thường được sử dụng trong một số trường hợp xác thực email gửi đi. Ví dụ về dạng thức một bản ghi PTR như sau: 90.163.101.103.in-addr.arpa IN PTR masterdns.tuanda.com. đối với IPv4, hoặc đối với IPv6: 0.0.0.0.0.0.0.0.0.0.0.0.d.c.b.a.4.3.2.1.3.2.1.0.8.c.d.0.1.0.0.2.ip6.arpa IN PTR masterdns.tuanda.com. 6. Record SRV# Bản ghi SRV được sử dụng để xác định vị trí các dịch vụ đặc biệt trong 1 domain, ví dụ tên máy chủ và số cổng của các máy chủ cho các dịch vụ được chỉ định. Ví dụ: _ldap._tcp.example.com. 3600 IN SRV 10 0 389 ldap01.example.com. Một Client trong trường hợp này có thể nhờ DNS nhận ra rằng, trong tên miền example.com có LDAP Server ldap01, mà có thể liên lạc qua cổng TCP Port 389 . Các trường trong record SRV : Tên dịch vụ service. Giao thức sử dụng. Tên miền (domain name). TTL: Thời gian RR được giữ trong cache Class: standard DNS class, luôn là IN Ưu tiên: ưu tiên của host, số càng nhỏ càng ưu tiên. Trọng lượng: khi cùng bực ưu tiên, thì trọng lượng 3 so với trọng lượng 2 sẽ được lựa chọn 60% (hỗ trợ load balancing). Port của dịch vụ (tcp hay udp). Target chỉ định FQDN cho host hỗ trợ dịch vụ. 7. Record CNAME (Canonical Name)# Cho phép tên miền có nhiều bí danh khác nhau, khi truy cập các bí danh sẽ cũng về một địa chỉ tên miền. Để sử dụng bản ghi CNAME cần khai báo bản ghi A trước. Ví dụ bản ghi CNAME phổ biến nhất: www CNAME example.com mail CNAME example.com example.com A 103.101.161.201 Khi một yêu cầu đến địa chỉ www.example.com thì DNS sẽ tìm đến example thông qua bản ghi CNAME, một truy vấn DNS mới sẽ tiếp tục tìm đến địa chỉ IP: 103.101.161.201 thông qua bản ghi A. 8. Record MX# Bản ghi MX có tác dụng xác định, chuyển thư đến domain hoặc subdomain đích. Bản ghi MX có dạng example.com MX 10 mail.example.com. mail.example.com A 103.101.161.201 Độ ưu tiền càng cao thì số càng thấp. example.com MX 10 mail_1.example.com example.com MX 20 mail_2.example.com example.com MX 30 mail_3.example.com Bản ghi MX không nhất thiết phải trỏ đến hosting – VPS- Server của người dùng. Nếu người dùng đang sử dụng dịch vụ mail của bên thứ ba như Gmail thì cần sử dụng bản nghi MX do họ cung cấp. 9. Record TXT# Bản ghi TXT(text) được sử dụng để cung cấp khả năng liên kết văn bản tùy ý với máy chủ. Chủ yếu dùng trong mục đích xác thực máy chủ với tên miền. 10. Record DKIM# Là bản ghi dùng để xác thực người gửi bằng cách mã hóa một phần email gửi bằng một chuỗi ký tự, xem như là chữ ký. Khi email được gửi đi máy chủ mail sẽ kiểm so sánh với thông tin bản ghi đã được cấu hình trong DNS để xác nhận. Bản ghi DKIM có dạng: mail._domainkey.cloud365.vn TXT k=rsa;p=MIIBIjANBgkqhkiG9w0BA 11. Record SPF# Record SPF được tạo ra nhầm đảm bảo các máy chủ mail sẽ chấp nhận mail từ tên miền của khách hàng chỉ được gửi đi từ server của khách hàng. Sẽ giúp chống spam và giả mạo email. Bản ghi SPF thể hiện dưới dạng: cloud365.vn SPF &quot;v=spf1 ip4:103.101.162.0/24 -all&quot; 3600 Tùy vào hệ thống DNS mà có thể hiển thị bản ghi SPF hoặc TXT Với bản ghi SPF, máy chủ tiếp nhận mail sẽ kiểm tra IP của máy chủ gửi và IP của máy chủ đã đăng kí bản ghi SPF example.com. Nếu Khách hàng có nhiều máy chủ mail nên liệt kê tất cả trong bản ghi SPF giúp đảm bảo thư đến được chính xác và đầy đủ. ** Tài liệu tham khảo: https://vnnic.vn/diachiip/hotro/c%C3%A1c-c%C3%A2u-h%E1%BB%8Fi-%C4%91%C3%A1p-v%E1%BB%81-t%C3%AAn-mi%E1%BB%81n-ng%C6%B0%E1%BB%A3c https://vnnic.vn/sites/default/files/tailieu/huong_dan_khai_bao_ten_mien_nguoc.pdf https://vi.wikipedia.org/wiki/SRV_Record#C%E1%BA%A5u_tr%C3%BAc https://www.dns-school.org/Documentation/bind-arm/Bv9ARM.ch01.html https://securitydaily.net/tim-hieu-he-thong-ten-mien-dns-domain-name-system/ Credit: Cloud365_vn","url":"https://thu4nvd.github.io//dns-record/","@type":"BlogPosting","headline":"🌐 DNS - Một bản ghi (DNS record) trông như thế nào?","dateModified":"2023-07-16T12:27:45+07:00","datePublished":"2022-10-04T01:17:52+07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://thu4nvd.github.io//dns-record/"},"@context":"https://schema.org"}</script><title>🌐 DNS - Một bản ghi (DNS record) trông như thế nào? | Thu4nvd Blog</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar-icon.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Thu4nvd Blog</a></div><div class="site-subtitle font-italic">Get In the Game</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/thu4nvd" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/thu4nvd" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['thuanvd','outlook.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span>🌐 DNS - Một bản ghi (DNS record) trông như thế nào?</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>🌐 DNS - Một bản ghi (DNS record) trông như thế nào?</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> thu4nvd </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Oct 4, 2022, 1:17 AM +0700" prep="on" > Oct 4, 2022 <i class="unloaded">2022-10-04T01:17:52+07:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jul 16, 2023, 12:27 PM +0700" prefix="Updated " > Jul 16 <i class="unloaded">2023-07-16T12:27:45+07:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1509 words">8 min</span></div></div><div class="post-content"><p></p><p><strong><em>Domain Name System (DNS)&nbsp;thay đổi các URL dễ đọc thành&nbsp;địa chỉ IP. Nhưng làm thế nào để bạn đảm bảo rằng một&nbsp;<a href="https://quantrimang.com/url-la-gi-158090">URL</a>&nbsp;đang trỏ đến đúng địa chỉ IP? Trước khi mọi người có thể tìm thấy trang web của bạn, bạn phải xác định các DNS record (bản ghi DNS) của trang web.</em></strong></p><p></p><p></p><p>DNS record cơ bản nhất liên kết domain với một địa chỉ IP. Có những loại bản ghi DNS khác đảm bảo email được gửi và cho phép bạn thiết lập domain phụ và các dịch vụ khác.</p><p></p><p></p><p></p><p></p><p></p><figure class="wp-block-image size-full"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/2022/10/dns-records-south-africa-nameservers.jpg" alt="" class="wp-image-1819" /></figure><p></p><p></p><h2>Thông tin nào có trong mỗi bản ghi DNS?</h2><p></p><p></p><p>Mỗi bản ghi DNS chứa 4 trường chính:&nbsp;<strong>Type, Name, Data</strong>&nbsp;và<strong>&nbsp;TTL</strong>.</p><p></p><p></p><p>–&nbsp;<strong>Type</strong>: Loại bản ghi DNS xác định phần domain mà mỗi bản ghi sẽ thay đổi. Các loại bản ghi quan trọng nhất để giúp bạn thiết lập và vận hành được đề cập bên dưới.</p><p></p><p></p><p>–&nbsp;<strong>Name</strong>: Trường này cho phép bạn thêm tiền tố (hay chính xác hơn là hậu tố, vì tên miền về mặt kỹ thuật được đọc từ phải sang trái) vào tên miền chính. Nếu bạn đang thêm bản ghi cho một domain phụ, chẳng hạn như&nbsp;<strong>shop.example.com</strong>, bạn sẽ nhập&nbsp;<strong>“shop”</strong>&nbsp;vào trường này.</p><p></p><p></p><p>–&nbsp;<strong>Data</strong>: Trường dữ liệu chứa thông tin khác nhau tùy thuộc vào loại bản ghi bạn đang tạo.</p><p></p><p></p><p>–&nbsp;<strong>TTL</strong>: TTL là viết tắt của&nbsp;<strong>Time to Live</strong>. Đây là thời gian tính bằng giây để mọi thay đổi đối với bản ghi DNS có hiệu lực. Với TTL là 3600, tất cả các thay đổi đối với bản ghi ví dụ này sẽ được làm mới sau mỗi 3600 giây (1 giờ).</p><p></p><p></p><h2 id="1-soa-start-of-authority">1. SOA (Start of Authority)<a href="https://blog.cloud365.vn/linux/dns-record/#1-soa-start-of-authority">#</a></h2><p></p><p></p><p>Trong mỗi tập tin cơ sở dữ liệu DNS phải có một và chỉ một record SOA (Start of Authority). Bao gồm các thông tin về domain trên DNS Server, thông tin về zone transfer.</p><p></p><p></p><p>Cú pháp :</p><p></p><p></p><pre class="wp-block-preformatted">$TTL 86400
@       IN SOA  masterdns.example.com.     admin.example.com. (
</pre><p></p><p></p><ul><li><code>masterdns.example.com.</code> giá trị DNS chính của tên miền hoặc máy chủ.<li><code>admin.<code>example</code>.com.</code> chuyển đổi từ dạng <code>admin@<code>example</code>.com</code>, thể hiện chủ thể sở hữu tên miền này.</ul><p></p><p></p><p><code>Serial</code> : áp dụng cho mọi dữ liệu trong zone và có định dạng <code>YYYYMMDDNN</code> với YYYY là năm, MM là tháng, DD là ngày, NN là số lần sửa đổi dữ liệu zone trong ngày. Luôn luôn phải tăng số này lên mỗi lần sửa đổi dữ liệu zone. Khi máy chủ Secondary liên lạc với máy chủ Primary, trước tiên nó sẽ hỏi số serial. Nếu số serial của máy Secondary nhỏ hơn số serial của máy Primary tức là dữ liệu zone trên Secondary đã cũ và sao đó máy Secondary sẽ sao chép dữ liệu mới từ máy Primary thay cho dữ liệu đang có.</p><p></p><p></p><p><code>Refresh</code> : chỉ ra khoảng thời gian máy chủ Secondary kiểm tra sữ liệu zone trên máy Primary để cập nhật nếu cần. Giá trị này thay đổi tùy theo tuần suất thay đổi dữ liệu trong zone.</p><p></p><p></p><p><code>Retry</code> : nếu máy chủ Secondary không kết nối được với máy chủ Primary theo thời hạn mô tả trong <code>refresh</code> (ví dụ máy chủ Primary bị shutdown vào lúc đó thì máy chủ Secondary phải tìm cách kết nối lại với máy chủ Primary theo một chu kỳ thời gian mô tả trong <code>retry</code>. Thông thường, giá trị này nhỏ hơn giá trị <code>refresh</code>).</p><p></p><p></p><p><code>Expire</code> : nếu sau khoảng thời gian này mà máy chủ Secondary không kết nối được với máy chủ Primary thì dữ liệu zone trên máy Secondary sẽ bị quá hạn. Khi dữ liệu trên Secondary bị quá hạn thì máy chủ này sẽ không trả lời mỗi truy vấn về zone này nữa. Giá trị <code>expire</code> này phải lớn hơn giá trị <code>refresh</code> và giá trị <code>retry</code>.</p><p></p><p></p><p><code>TTL</code> (time to live) : giá trị này áp dụng cho mọi record trong zone và được đính kèm trong thông tin trả lời một truy vấn. Mục đích của nó là chỉ ra thời gian mà các máy chủ name server khác cache lại thông tin trả lời.</p><p></p><p></p><h2 id="2-ns-name-server">2. NS (Name Server)<a href="https://blog.cloud365.vn/linux/dns-record/#2-ns-name-server">#</a></h2><p></p><p></p><p>Record tiếp theo cần có trong zone là NS (name server) record. Mỗi name server cho zone sẽ có một NS record. Chứa địa chỉ IP của DNS Server cùng với các thông tin về domain đó.</p><p></p><p></p><p>Ví dụ : Record NS sau :</p><p></p><p></p><pre class="wp-block-preformatted">cloud365.vn. IN NS ns1.zonedns.vn.
cloud365.vn. IN NS ns2.zonedns.vn.</pre><p></p><p></p><p>Chỉ ra hai name servers cho miền Thực hiện bởi <a href="https://cloud365.vn/" target="_blank" rel="noreferrer noopener">cloud365.vn</a>.</p><p></p><p></p><h2 id="3-record-a">3. Record A<a href="https://blog.cloud365.vn/linux/dns-record/#3-record-a">#</a></h2><p></p><p></p><p>Là một record căn bản và quan trọng, dùng để ánh xạ từ một domain thành địa chỉ IP cho phép có thể truy cập website. Đây là chức năng cốt lõi của hệ thống DNS. Record A có dạng như sau:</p><p></p><p></p><p><code>cloud365.vn A 103.101.161.201</code></p><p></p><p></p><p>Tên miền con (subdomain):</p><p></p><p></p><p><code>sub.cloud365.vn A 103.101.161.201</code></p><p></p><p></p><h2 id="4-record-aaaa">4. Record AAAA<a href="https://blog.cloud365.vn/linux/dns-record/#4-record-aaaa">#</a></h2><p></p><p></p><p>Có nhiệm vụ tương tự như bản ghi A, nhưng thay vì địa chỉ IPv4 sẽ là địa chỉ IPv6.</p><p></p><p></p><h2 id="5-record-ptr">5. Record PTR<a href="https://blog.cloud365.vn/linux/dns-record/#5-record-ptr">#</a></h2><p></p><p></p><p>Hệ thống tên miền thông thường cho phép chuyển đổi từ tên miền sang địa chỉ IP. Trong thực tế, một số dịch vụ Internet đòi hỏi hệ thống máy chủ DNS phải có chức năng chuyển đổi từ địa chỉ IP sang tên miền. Tên miền ngược thường được sử dụng trong một số trường hợp xác thực email gửi đi.</p><p></p><p></p><p>Ví dụ về dạng thức một bản ghi PTR như sau:</p><p></p><p></p><p><code>90.163.101.103.in-addr.arpa IN PTR masterdns.tuanda.com.</code></p><p></p><p></p><p>đối với IPv4, hoặc đối với IPv6:</p><p></p><p></p><p><code>0.0.0.0.0.0.0.0.0.0.0.0.d.c.b.a.4.3.2.1.3.2.1.0.8.c.d.0.1.0.0.2.ip6.arpa IN PTR masterdns.tuanda.com.</code></p><p></p><p></p><h2 id="6-record-srv">6. Record SRV<a href="https://blog.cloud365.vn/linux/dns-record/#6-record-srv">#</a></h2><p></p><p></p><p>Bản ghi SRV được sử dụng để xác định vị trí các dịch vụ đặc biệt trong 1 domain, ví dụ tên máy chủ và số cổng của các máy chủ cho các dịch vụ được chỉ định. Ví dụ:</p><p></p><p></p><pre class="wp-block-preformatted">_ldap._tcp.example.com. 3600  IN  SRV  10  0  389  ldap01.example.com.</pre><p></p><p></p><p>Một Client trong trường hợp này có thể nhờ DNS nhận ra rằng, trong tên miền example.com có LDAP Server ldap01, mà có thể liên lạc qua cổng TCP Port 389 .</p><p></p><p></p><ul><li>Các trường trong record SRV :<ul><li>Tên dịch vụ service.<li>Giao thức sử dụng.<li>Tên miền (domain name).<li>TTL: Thời gian RR được giữ trong cache<li>Class: standard DNS class, luôn là IN<li>Ưu tiên: ưu tiên của host, số càng nhỏ càng ưu tiên.<li>Trọng lượng: khi cùng bực ưu tiên, thì trọng lượng 3 so với trọng lượng 2 sẽ được lựa chọn 60% (hỗ trợ load balancing).<li>Port của dịch vụ (tcp hay udp).<li>Target chỉ định FQDN cho host hỗ trợ dịch vụ.</ul></ul><p></p><p></p><h2 id="7-record-cname-canonical-name">7. Record CNAME (Canonical Name)<a href="https://blog.cloud365.vn/linux/dns-record/#7-record-cname-canonical-name">#</a></h2><p></p><p></p><p>Cho phép tên miền có nhiều bí danh khác nhau, khi truy cập các bí danh sẽ cũng về một địa chỉ tên miền. Để sử dụng bản ghi CNAME cần khai báo bản ghi A trước. Ví dụ bản ghi CNAME phổ biến nhất:</p><p></p><p></p><pre class="wp-block-preformatted">www   CNAME   example.com
mail CNAME example.com
example.com   A   103.101.161.201</pre><p></p><p></p><p>Khi một yêu cầu đến địa chỉ www.example.com thì DNS sẽ tìm đến example thông qua bản ghi CNAME, một truy vấn DNS mới sẽ tiếp tục tìm đến địa chỉ IP: 103.101.161.201 thông qua bản ghi A.</p><p></p><p></p><h2 id="8-record-mx">8. Record MX<a href="https://blog.cloud365.vn/linux/dns-record/#8-record-mx">#</a></h2><p></p><p></p><p>Bản ghi MX có tác dụng xác định, chuyển thư đến domain hoặc subdomain đích. Bản ghi MX có dạng</p><p></p><p></p><pre class="wp-block-preformatted">example.com    MX    10    mail.example.com.
mail.example.com    A    103.101.161.201</pre><p></p><p></p><p>Độ ưu tiền càng cao thì số càng thấp.</p><p></p><p></p><pre class="wp-block-preformatted">example.com MX 10 mail_1.example.com
example.com MX 20 mail_2.example.com
example.com MX 30 mail_3.example.com</pre><p></p><p></p><p>Bản ghi MX không nhất thiết phải trỏ đến hosting – VPS- Server của người dùng. Nếu người dùng đang sử dụng dịch vụ mail của bên thứ ba như Gmail thì cần sử dụng bản nghi MX do họ cung cấp.</p><p></p><p></p><h2 id="9-record-txt">9. Record TXT<a href="https://blog.cloud365.vn/linux/dns-record/#9-record-txt">#</a></h2><p></p><p></p><p>Bản ghi TXT(text) được sử dụng để cung cấp khả năng liên kết văn bản tùy ý với máy chủ. Chủ yếu dùng trong mục đích xác thực máy chủ với tên miền.</p><p></p><p></p><h2 id="10-record-dkim">10. Record DKIM<a href="https://blog.cloud365.vn/linux/dns-record/#10-record-dkim">#</a></h2><p></p><p></p><p>Là bản ghi dùng để xác thực người gửi bằng cách mã hóa một phần email gửi bằng một chuỗi ký tự, xem như là chữ ký.</p><p></p><p></p><p>Khi email được gửi đi máy chủ mail sẽ kiểm so sánh với thông tin bản ghi đã được cấu hình trong DNS để xác nhận. Bản ghi DKIM có dạng:</p><p></p><p></p><pre class="wp-block-preformatted">    mail._domainkey.cloud365.vn     TXT  k=rsa;p=MIIBIjANBgkqhkiG9w0BA</pre><p></p><p></p><h2 id="11-record-spf">11. Record SPF<a href="https://blog.cloud365.vn/linux/dns-record/#11-record-spf">#</a></h2><p></p><p></p><p>Record SPF được tạo ra nhầm đảm bảo các máy chủ mail sẽ chấp nhận mail từ tên miền của khách hàng chỉ được gửi đi từ server của khách hàng. Sẽ giúp chống spam và giả mạo email. Bản ghi SPF thể hiện dưới dạng:</p><p></p><p></p><pre class="wp-block-preformatted">cloud365.vn   SPF     "v=spf1 ip4:103.101.162.0/24 -all" 3600</pre><p></p><p></p><p>Tùy vào hệ thống DNS mà có thể hiển thị bản ghi SPF hoặc TXT Với bản ghi SPF, máy chủ tiếp nhận mail sẽ kiểm tra IP của máy chủ gửi và IP của máy chủ đã đăng kí bản ghi SPF example.com. Nếu Khách hàng có nhiều máy chủ mail nên liệt kê tất cả trong bản ghi SPF giúp đảm bảo thư đến được chính xác và đầy đủ.</p><p></p><p></p><p>** Tài liệu tham khảo:</p><p></p><p></p><p><a href="https://vnnic.vn/diachiip/hotro/c%C3%A1c-c%C3%A2u-h%E1%BB%8Fi-%C4%91%C3%A1p-v%E1%BB%81-t%C3%AAn-mi%E1%BB%81n-ng%C6%B0%E1%BB%A3c">https://vnnic.vn/diachiip/hotro/c%C3%A1c-c%C3%A2u-h%E1%BB%8Fi-%C4%91%C3%A1p-v%E1%BB%81-t%C3%AAn-mi%E1%BB%81n-ng%C6%B0%E1%BB%A3c</a></p><p></p><p></p><p><a href="https://vnnic.vn/sites/default/files/tailieu/huong_dan_khai_bao_ten_mien_nguoc.pdf">https://vnnic.vn/sites/default/files/tailieu/huong_dan_khai_bao_ten_mien_nguoc.pdf</a></p><p></p><p></p><p><a href="https://vi.wikipedia.org/wiki/SRV_Record#C%E1%BA%A5u_tr%C3%BAc">https://vi.wikipedia.org/wiki/SRV_Record#C%E1%BA%A5u_tr%C3%BAc</a></p><p></p><p></p><p><a href="https://www.dns-school.org/Documentation/bind-arm/Bv9ARM.ch01.html">https://www.dns-school.org/Documentation/bind-arm/Bv9ARM.ch01.html</a></p><p></p><p></p><p><a href="https://securitydaily.net/tim-hieu-he-thong-ten-mien-dns-domain-name-system/" target="_blank" rel="noopener">https://securitydaily.net/tim-hieu-he-thong-ten-mien-dns-domain-name-system/</a></p><p></p><p></p><p>Credit: Cloud365_vn</p><p></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/system/'>System</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/dns/" class="post-tag no-text-decoration" >dns</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=🌐 DNS - Một bản ghi (DNS record) trông như thế nào? - Thu4nvd Blog&url=https://thu4nvd.github.io//dns-record/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=🌐 DNS - Một bản ghi (DNS record) trông như thế nào? - Thu4nvd Blog&u=https://thu4nvd.github.io//dns-record/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=🌐 DNS - Một bản ghi (DNS record) trông như thế nào? - Thu4nvd Blog&url=https://thu4nvd.github.io//dns-record/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/linux-source-install/">🐧 Linux - Cài phần mềm từ source</a><li><a href="/nas-synology/">🧺 NAS Synology - Thiết bị lưu trữ dữ liệu</a><li><a href="/prometheus-install/">🔥 Prometheus - Cài đặt + Grafana / CentOS 7</a><li><a href="/wget/">🐧 wget - commands with examples</a><li><a href="/centreon-install-iso/">© Centreon - Cài đặt Centreon 19 ISO💿</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/travel/">travel</a> <a class="post-tag" href="/tags/xuyenviet/">xuyenviet</a> <a class="post-tag" href="/tags/cameroun/">cameroun</a> <a class="post-tag" href="/tags/french/">french</a> <a class="post-tag" href="/tags/monitoring/">monitoring</a> <a class="post-tag" href="/tags/skill/">skill</a> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/dns/">dns</a> <a class="post-tag" href="/tags/howto/">howto</a> <a class="post-tag" href="/tags/zabbix/">zabbix</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/dns-cac-loai-tan-cong-va-chien-thuat-bao-mat/"><div class="card-body"> <span class="timeago small" > Oct 1, 2022 <i class="unloaded">2022-10-01T01:52:22+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>🌐 DNS - Các loại tấn công và chiến thuật bảo mật</h3><div class="text-muted small"><p> Máy chủ tên miền (Domain Name Server) là một khối kiến trúc nổi bật trên nền Internet. Nó được phát triển như một hệ thống để chuyển đổi tên theo thứ tự bảng chữ cái thành địa chỉ IP, cho phép ngư...</p></div></div></a></div><div class="card"> <a href="/dns-qna/"><div class="card-body"> <span class="timeago small" > Oct 4, 2022 <i class="unloaded">2022-10-04T10:17:16+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>🌐 DNS - QnA</h3><div class="text-muted small"><p> Thực tế DNS có dùng bind làm phần mềm cấu hình DNS?Hệ thống lớn trong thực tế dùng DNS nào?Xây dựng hệ thống DNS nội bộ nhanh chóng?DNS lớn chứa khoảng bao nhiêu bản ghi?Backup hệ thống DNSLoad...</p></div></div></a></div><div class="card"> <a href="/linux-source-install/"><div class="card-body"> <span class="timeago small" > Oct 12, 2022 <i class="unloaded">2022-10-12T23:19:30+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>🐧 Linux - Cài phần mềm từ source</h3><div class="text-muted small"><p> 1. Giới thiệu Các phần mềm trên Linux không tự đóng gói sẵn. Bởi vì chạy trên chạy trên nhìều hệ thống khác nhau trong họ Unix như Solaris, AIX, HP-UX… thậm chí các phần mềm đó có thể chạy trên...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/zabbix-install/" class="btn btn-outline-primary" prompt="Older"><p>📯 Zabbix - Các bước cài đặt lên CentOS 8</p></a> <a href="/dns-qna/" class="btn btn-outline-primary" prompt="Newer"><p>🌐 DNS - QnA</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/thu4nvd">Richard Thu4nvd</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."> Some rights reserved. </span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/travel/">travel</a> <a class="post-tag" href="/tags/xuyenviet/">xuyenviet</a> <a class="post-tag" href="/tags/cameroun/">cameroun</a> <a class="post-tag" href="/tags/french/">french</a> <a class="post-tag" href="/tags/monitoring/">monitoring</a> <a class="post-tag" href="/tags/skill/">skill</a> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/dns/">dns</a> <a class="post-tag" href="/tags/howto/">howto</a> <a class="post-tag" href="/tags/zabbix/">zabbix</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://thu4nvd.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
